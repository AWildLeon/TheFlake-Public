#!/usr/bin/env direnv

# Stop treefmt watcher when leaving the directory
TREEFMT_WATCHER_PID_FILE="$PWD/.direnv/treefmt-watcher.pid"

if [ -f "$TREEFMT_WATCHER_PID_FILE" ]; then
  watcher_pid=$(cat "$TREEFMT_WATCHER_PID_FILE")
  if kill -0 "$watcher_pid" 2>/dev/null; then
    kill "$watcher_pid" 2>/dev/null
    echo "ðŸ›‘ Stopped treefmt watcher (PID: $watcher_pid)"
  fi
  rm -f "$TREEFMT_WATCHER_PID_FILE"
fi
